import{_,m as j,l as k,o as z,c as i,a as l,b as s,k as u,p as c,n as E,u as r,t as m,q as T,f,v as O,h as Q,L as W,e as G,w as H,r as X,F as J,j as K,s as Y,x as Z}from"./index-BpKRf9zd.js";import{u as ee,V as S,R as se}from"./useForm-NAgx8MxR.js";const re={class:"login page-container"},oe={class:"login-form-container"},te=["value","disabled","aria-invalid","aria-describedby"],ae={key:0,id:"email-error",class:"error-message",role:"alert"},le={class:"password-input-group"},ie=["type","value","disabled","aria-invalid","aria-describedby"],ne=["aria-label"],de={key:0,id:"password-error",class:"error-message",role:"alert"},ue={class:"form-options"},me={class:"remember-me"},pe=["disabled"],ve=["disabled","aria-describedby"],ge={class:"signup-prompt"},be={key:1,id:"form-errors",class:"form-errors",role:"alert","aria-live":"assertive"},we={class:"modal-header"},ce={class:"modal-body"},fe={class:"form-group"},ye={__name:"LoginView",setup(ke){const A=Z(),B=j(),{formData:g,errors:t,isValid:h,isSubmitting:n,handleFieldInput:I,handleFieldBlur:P,handleSubmit:q,resetForm:$,showMessage:b}=ee({email:"",password:"",rememberMe:!1},{email:[{required:!0,message:S.REQUIRED},{pattern:se.EMAIL,message:S.EMAIL}],password:[{required:!0,message:S.REQUIRED}]}),p=k(!1),v=k(!1),d=k("");z(()=>{document.title="Sign In - Epictetus EE Team"});const D=async()=>{var e;const a=await q(async w=>{if(await B.login({email:w.email,password:w.password}))b("Login successful! Welcome back.","success"),$(),setTimeout(()=>{A.push("/admin")},1e3);else throw new Error("Invalid email or password. Please try again.")});a.success||b(((e=a.error)==null?void 0:e.message)||"Login failed. Please try again.","error")},N=async()=>{if(d.value)try{await new Promise(a=>setTimeout(a,1e3)),console.log("Password reset requested for:",d.value),b(`Password reset instructions sent to ${d.value}`,"success"),v.value=!1,d.value=""}catch(a){console.error("Password reset failed:",a),b("Failed to send reset instructions. Please try again.","error")}};return(a,e)=>{var y,M,L,R,x,C,V,F;const w=X("router-link");return l(),i("div",re,[e[22]||(e[22]=s("div",{class:"login-header"},[s("h1",null,"Welcome Back"),s("p",{class:"login-description"}," Sign in to your Epictetus EE Team account to access exclusive resources and connect with fellow students. ")],-1)),s("div",oe,[s("form",{onSubmit:c(D,["prevent"]),class:"login-form"},[s("div",{class:E(["form-group",{error:(y=r(t).email)==null?void 0:y.length}])},[e[11]||(e[11]=s("label",{for:"email"},"Email Address *",-1)),s("input",{type:"email",id:"email",value:r(g).email,onInput:e[0]||(e[0]=o=>r(I)("email",o)),onBlur:e[1]||(e[1]=o=>r(P)("email")),placeholder:"Enter your email address",required:"",disabled:r(n),autocomplete:"username","aria-invalid":(M=r(t).email)!=null&&M.length?"true":"false","aria-describedby":(L=r(t).email)!=null&&L.length?"email-error":null},null,40,te),(R=r(t).email)!=null&&R.length?(l(),i("div",ae,m(r(t).email[0]),1)):u("",!0)],2),s("div",{class:E(["form-group",{error:(x=r(t).password)==null?void 0:x.length}])},[e[12]||(e[12]=s("label",{for:"password"},"Password *",-1)),s("div",le,[s("input",{type:p.value?"text":"password",id:"password",value:r(g).password,onInput:e[2]||(e[2]=o=>r(I)("password",o)),onBlur:e[3]||(e[3]=o=>r(P)("password")),placeholder:"Enter your password",required:"",disabled:r(n),autocomplete:"current-password","aria-invalid":(C=r(t).password)!=null&&C.length?"true":"false","aria-describedby":(V=r(t).password)!=null&&V.length?"password-error":null},null,40,ie),s("button",{type:"button",class:"password-toggle",onClick:e[4]||(e[4]=o=>p.value=!p.value),"aria-label":p.value?"Hide password":"Show password"},m(p.value?"ðŸ‘ï¸":"ðŸ‘ï¸â€ðŸ—¨ï¸"),9,ne)]),(F=r(t).password)!=null&&F.length?(l(),i("div",de,m(r(t).password[0]),1)):u("",!0)],2),s("div",ue,[s("label",me,[T(s("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=o=>r(g).rememberMe=o),disabled:r(n)},null,8,pe),[[O,r(g).rememberMe]]),e[13]||(e[13]=s("span",{class:"checkmark"},null,-1)),e[14]||(e[14]=f(" Remember me ",-1))]),s("a",{href:"#",onClick:e[6]||(e[6]=c(o=>v.value=!0,["prevent"])),class:"forgot-password"}," Forgot password? ")]),s("button",{type:"submit",class:"btn btn-primary submit-btn",disabled:!a.canSubmit||r(n),"aria-describedby":r(h)?null:"form-errors"},[r(n)?(l(),Q(W,{key:0,size:"small",color:"white"})):u("",!0),f(" "+m(r(n)?"Signing in...":"Sign In"),1)],8,ve),s("div",ge,[s("p",null,[e[16]||(e[16]=f("Don't have an account? ",-1)),G(w,{to:"/signup"},{default:H(()=>[...e[15]||(e[15]=[f("Create one here",-1)])]),_:1})])])],32),a.statusMessage.text?(l(),i("div",{key:0,class:E(["status-message",a.statusMessage.type]),role:"alert","aria-live":"polite"},m(a.statusMessage.text),3)):u("",!0),!r(h)&&Object.keys(r(t)).length>0?(l(),i("div",be,[e[17]||(e[17]=s("h4",null,"Please fix the following errors:",-1)),s("ul",null,[(l(!0),i(J,null,K(r(t),(o,U)=>(l(),i("li",{key:U},m(o[0]),1))),128))])])):u("",!0)]),v.value?(l(),i("div",{key:0,class:"modal-overlay",onClick:e[10]||(e[10]=o=>v.value=!1)},[s("div",{class:"modal-content",onClick:e[9]||(e[9]=c(()=>{},["stop"]))},[s("div",we,[e[18]||(e[18]=s("h3",null,"Reset Password",-1)),s("button",{onClick:e[7]||(e[7]=o=>v.value=!1),class:"close-btn"},"Ã—")]),s("div",ce,[e[21]||(e[21]=s("p",null,"Enter your email address and we'll send you instructions to reset your password.",-1)),s("form",{onSubmit:c(N,["prevent"]),class:"forgot-form"},[s("div",fe,[e[19]||(e[19]=s("label",{for:"reset-email"},"Email Address",-1)),T(s("input",{type:"email",id:"reset-email","onUpdate:modelValue":e[8]||(e[8]=o=>d.value=o),placeholder:"your.email@example.com",required:""},null,512),[[Y,d.value]])]),e[20]||(e[20]=s("button",{type:"submit",class:"btn btn-primary"}," Send Reset Instructions ",-1))],32)])])])):u("",!0)])}}},he=_(ye,[["__scopeId","data-v-2d80aac6"]]);export{he as default};
