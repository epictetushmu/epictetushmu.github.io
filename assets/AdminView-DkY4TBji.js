import{_ as j,y as B,l as k,g as E,z as Z,o as N,c as p,a as m,b as t,q as A,s as S,D as tt,d as et,v as st,t as r,p as ot,m as at,x as it,e as f,k as M,u as V,F,j as L,w as x,L as lt,n as T,f as D}from"./index-DpsdNvvR.js";import{u as nt}from"./news-Cw_4Spbn.js";import{u as rt,P as dt,A as U}from"./useBreadcrumbs-O-vToKG6.js";import{A as ct}from"./AppModal-C6n62Tz3.js";const ut={class:"article-editor"},pt={class:"form-group"},mt={class:"form-group"},vt={class:"form-group"},gt={class:"form-group"},ft={class:"form-group"},yt={class:"form-group"},ht={class:"form-group"},bt={class:"form-group checkbox-group"},wt={class:"checkbox-label"},_t={class:"form-actions"},At=["disabled"],kt={__name:"ArticleEditor",props:{article:{type:Object,default:null},isEditing:{type:Boolean,default:!1}},emits:["save","cancel"],setup(y,{expose:h,emit:d}){const c=y,b=d,a=B({title:"",description:"",content:"",category:"",tags:[],imageUrl:"",author:"Admin",published:!0}),v=k(""),n=E(()=>a.title.trim()&&a.description.trim()&&a.content.trim()&&a.category);Z(v,_=>{_?a.tags=_.split(",").map(s=>s.trim()).filter(s=>s):a.tags=[]}),N(()=>{c.isEditing&&c.article&&(Object.assign(a,{title:c.article.title||"",description:c.article.description||"",content:c.article.content||"",category:c.article.category||"",tags:c.article.tags||[],imageUrl:c.article.imageUrl||"",author:c.article.author||"Admin",published:c.article.published!==!1}),v.value=a.tags.join(", "))});const u=()=>{if(!n.value)return;const _={...a,tags:a.tags.filter(s=>s.trim())};c.isEditing&&c.article&&(_.id=c.article.id),b("save",_)},w=()=>{b("cancel")};return h({resetForm:()=>{Object.assign(a,{title:"",description:"",content:"",category:"",tags:[],imageUrl:"",author:"Admin",published:!0}),v.value=""}}),(_,s)=>(m(),p("div",ut,[t("form",{onSubmit:ot(u,["prevent"]),class:"editor-form"},[t("div",pt,[s[8]||(s[8]=t("label",{for:"title"},"Title *",-1)),A(t("input",{id:"title","onUpdate:modelValue":s[0]||(s[0]=i=>a.title=i),type:"text",placeholder:"Enter article title",required:"",class:"form-input"},null,512),[[S,a.title]])]),t("div",mt,[s[9]||(s[9]=t("label",{for:"description"},"Description *",-1)),A(t("textarea",{id:"description","onUpdate:modelValue":s[1]||(s[1]=i=>a.description=i),placeholder:"Brief description of the article",required:"",class:"form-textarea",rows:"3"},null,512),[[S,a.description]])]),t("div",vt,[s[10]||(s[10]=t("label",{for:"content"},"Content *",-1)),A(t("textarea",{id:"content","onUpdate:modelValue":s[2]||(s[2]=i=>a.content=i),placeholder:"Full article content",required:"",class:"form-textarea content-editor",rows:"10"},null,512),[[S,a.content]])]),t("div",gt,[s[12]||(s[12]=t("label",{for:"category"},"Category *",-1)),A(t("select",{id:"category","onUpdate:modelValue":s[3]||(s[3]=i=>a.category=i),required:"",class:"form-select"},[...s[11]||(s[11]=[et('<option value="" data-v-59228a40>Select a category</option><option value="academic" data-v-59228a40>Academic</option><option value="events" data-v-59228a40>Events</option><option value="announcements" data-v-59228a40>Announcements</option><option value="research" data-v-59228a40>Research</option><option value="student-life" data-v-59228a40>Student Life</option><option value="general" data-v-59228a40>General</option>',7)])],512),[[tt,a.category]])]),t("div",ft,[s[13]||(s[13]=t("label",{for:"tags"},"Tags",-1)),A(t("input",{id:"tags","onUpdate:modelValue":s[4]||(s[4]=i=>v.value=i),type:"text",placeholder:"Enter tags separated by commas (e.g., philosophy, stoicism, ethics)",class:"form-input"},null,512),[[S,v.value]]),s[14]||(s[14]=t("small",{class:"form-help"},"Separate multiple tags with commas",-1))]),t("div",yt,[s[15]||(s[15]=t("label",{for:"imageUrl"},"Image URL",-1)),A(t("input",{id:"imageUrl","onUpdate:modelValue":s[5]||(s[5]=i=>a.imageUrl=i),type:"url",placeholder:"https://example.com/image.jpg",class:"form-input"},null,512),[[S,a.imageUrl]])]),t("div",ht,[s[16]||(s[16]=t("label",{for:"author"},"Author",-1)),A(t("input",{id:"author","onUpdate:modelValue":s[6]||(s[6]=i=>a.author=i),type:"text",placeholder:"Author name",class:"form-input"},null,512),[[S,a.author]])]),t("div",bt,[t("label",wt,[A(t("input",{"onUpdate:modelValue":s[7]||(s[7]=i=>a.published=i),type:"checkbox",class:"form-checkbox"},null,512),[[st,a.published]]),s[17]||(s[17]=t("span",{class:"checkbox-text"},"Publish immediately",-1))])]),t("div",_t,[t("button",{type:"button",onClick:w,class:"btn btn-secondary"}," Cancel "),t("button",{type:"submit",class:"btn btn-primary",disabled:!n.value},r(y.isEditing?"Update Article":"Create Article"),9,At)])],32)]))}},xt=j(kt,[["__scopeId","data-v-59228a40"]]);function Ct(){const y=B({text:"",type:""}),h=(n,u="info",w=8e3)=>{y.text=n,y.type=u,w>0&&setTimeout(()=>{d()},w),setTimeout(()=>{const C=document.querySelector(".status-message");C&&C.scrollIntoView({behavior:"smooth",block:"nearest"})},100)},d=()=>{y.text="",y.type=""};return{statusMessage:y,showMessage:h,clearMessage:d,showSuccess:(n,u=8e3)=>h(n,"success",u),showError:(n,u=8e3)=>h(n,"error",u),showWarning:(n,u=8e3)=>h(n,"warning",u),showInfo:(n,u=8e3)=>h(n,"info",u)}}const St={class:"admin-panel page-container"},Dt={class:"admin-nav"},Ut=["onClick"],Et={class:"nav-icon"},$t={class:"nav-text"},Mt={key:0,class:"admin-section"},Vt={class:"section-header"},It={class:"articles-list"},Ft={key:0,class:"loading-state"},Lt={key:1,class:"empty-state"},Tt={key:2,class:"articles-grid"},jt={class:"article-header"},Bt={class:"article-title"},Nt={class:"article-badges"},Rt={key:0,class:"badge featured"},qt={class:"badge category"},zt={class:"article-meta"},Ot={class:"author"},Pt={class:"date"},Wt={class:"stats"},Gt={class:"article-excerpt"},Ht={class:"article-actions"},Jt={key:1,class:"admin-section"},Kt={class:"stats-grid"},Qt={class:"stat-card"},Xt={class:"stat-content"},Yt={class:"stat-card"},Zt={class:"stat-content"},te={class:"stat-card"},ee={class:"stat-content"},se={class:"stat-card"},oe={class:"stat-content"},ae={class:"categories-overview"},ie={class:"category-stats"},le={class:"category-name"},ne={class:"category-count"},re={key:2,class:"admin-section"},de={class:"settings-grid"},ce={class:"setting-card"},ue={class:"setting-actions"},pe={__name:"AdminView",setup(y){const h=at(),d=nt(),c=it();h.isAdmin||c.push("/");const b=k("news"),a=k(!1),v=k(!1),n=k(null),u=k(null),w=k(!1),C=k(null),{breadcrumbs:_}=rt("Admin"),{statusMessage:s,showMessage:i}=Ct(),R=[{id:"news",name:"News Management",icon:"ðŸ“°"},{id:"stats",name:"Statistics",icon:"ðŸ“Š"},{id:"settings",name:"Settings",icon:"âš™ï¸"}],$=E(()=>d.articles),q=E(()=>d.featuredArticles.length),z=E(()=>$.value.reduce((l,e)=>l+e.views,0)),O=E(()=>$.value.reduce((l,e)=>l+e.likes,0)),P=E(()=>d.categories.filter(l=>l.value!=="all")),W=l=>{n.value={...l},v.value=!0},G=async l=>{if(confirm(`Are you sure you want to delete "${l.title}"?`)){u.value=l.id;try{const e=await d.deleteArticle(l.id);e.success?i("Article deleted successfully","success"):i(e.error||"Failed to delete article","error")}catch{i("An error occurred while deleting the article","error")}finally{u.value=null}}},H=async l=>{try{let e;if(v.value?e=await d.updateArticle(n.value.id,l):e=await d.addArticle(l),e.success){I();const o=v.value?"updated":"created";i(`Article ${o} successfully`,"success")}else i(e.error||"Failed to save article","error")}catch{i("An error occurred while saving the article","error")}},I=()=>{a.value=!1,v.value=!1,n.value=null},J=()=>{try{const l=d.exportData(),e=new Blob([l],{type:"application/json"}),o=URL.createObjectURL(e),g=document.createElement("a");g.href=o,g.download=`epictetus-news-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(o),i("Data exported successfully","success")}catch{i("Failed to export data","error")}},K=()=>{var l;(l=C.value)==null||l.click()},Q=async l=>{const e=l.target.files[0];if(e){try{const o=await e.text(),g=await d.importData(o);g.success?i("Data imported successfully","success"):i(g.error||"Failed to import data","error")}catch{i("Invalid file format","error")}l.target.value=""}},X=async()=>{if(confirm("Are you sure you want to reset all data to default? This cannot be undone.")){w.value=!0;try{const l=await d.resetToDefault();l.success?i("Data reset to default successfully","success"):i(l.error||"Failed to reset data","error")}catch{i("An error occurred while resetting data","error")}finally{w.value=!1}}},Y=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return N(()=>{d.clearError()}),(l,e)=>(m(),p("div",St,[f(dt,{title:"Admin Panel",description:"Manage news articles and system settings",breadcrumbs:V(_),showBreadcrumbs:!0},null,8,["breadcrumbs"]),t("div",Dt,[(m(),p(F,null,L(R,o=>t("button",{key:o.id,onClick:g=>b.value=o.id,class:T(["admin-nav-btn",{active:b.value===o.id}])},[t("span",Et,r(o.icon),1),t("span",$t,r(o.name),1)],10,Ut)),64))]),b.value==="news"?(m(),p("div",Mt,[t("div",Vt,[e[2]||(e[2]=t("h2",null,"News Management",-1)),f(U,{onClick:e[0]||(e[0]=o=>a.value=!0),variant:"primary"},{default:x(()=>[...e[1]||(e[1]=[t("span",{class:"icon"},"ðŸ“",-1),D(" Add New Article ",-1)])]),_:1})]),t("div",It,[V(d).isLoading?(m(),p("div",Ft,[f(lt,{size:"large"}),e[3]||(e[3]=t("p",null,"Loading articles...",-1))])):$.value.length===0?(m(),p("div",Lt,[...e[4]||(e[4]=[t("div",{class:"empty-icon"},"ðŸ“°",-1),t("h3",null,"No articles found",-1),t("p",null,"Start by creating your first news article",-1)])])):(m(),p("div",Tt,[(m(!0),p(F,null,L($.value,o=>(m(),p("div",{key:o.id,class:"article-card"},[t("div",jt,[t("h3",Bt,r(o.title),1),t("div",Nt,[o.featured?(m(),p("span",Rt,"Featured")):M("",!0),t("span",qt,r(o.category),1)])]),t("div",zt,[t("span",Ot,"By "+r(o.author),1),t("span",Pt,r(Y(o.publishedDate)),1),t("span",Wt," ðŸ‘ï¸ "+r(o.views)+" | â¤ï¸ "+r(o.likes),1)]),t("p",Gt,r(o.description),1),t("div",Ht,[f(U,{onClick:g=>W(o),variant:"outline",size:"small"},{default:x(()=>[...e[5]||(e[5]=[D(" âœï¸ Edit ",-1)])]),_:1},8,["onClick"]),f(U,{onClick:g=>G(o),variant:"outline",size:"small",loading:u.value===o.id},{default:x(()=>[...e[6]||(e[6]=[D(" ðŸ—‘ï¸ Delete ",-1)])]),_:1},8,["onClick","loading"])])]))),128))]))])])):M("",!0),b.value==="stats"?(m(),p("div",Jt,[e[16]||(e[16]=t("div",{class:"section-header"},[t("h2",null,"Statistics")],-1)),t("div",Kt,[t("div",Qt,[e[8]||(e[8]=t("div",{class:"stat-icon"},"ðŸ“°",-1)),t("div",Xt,[t("h3",null,r($.value.length),1),e[7]||(e[7]=t("p",null,"Total Articles",-1))])]),t("div",Yt,[e[10]||(e[10]=t("div",{class:"stat-icon"},"â­",-1)),t("div",Zt,[t("h3",null,r(q.value),1),e[9]||(e[9]=t("p",null,"Featured Articles",-1))])]),t("div",te,[e[12]||(e[12]=t("div",{class:"stat-icon"},"ðŸ‘ï¸",-1)),t("div",ee,[t("h3",null,r(z.value),1),e[11]||(e[11]=t("p",null,"Total Views",-1))])]),t("div",se,[e[14]||(e[14]=t("div",{class:"stat-icon"},"â¤ï¸",-1)),t("div",oe,[t("h3",null,r(O.value),1),e[13]||(e[13]=t("p",null,"Total Likes",-1))])])]),t("div",ae,[e[15]||(e[15]=t("h3",null,"Articles by Category",-1)),t("div",ie,[(m(!0),p(F,null,L(P.value,o=>(m(),p("div",{key:o.value,class:"category-stat"},[t("span",le,r(o.label),1),t("span",ne,r(o.count),1)]))),128))])])])):M("",!0),b.value==="settings"?(m(),p("div",re,[e[22]||(e[22]=t("div",{class:"section-header"},[t("h2",null,"Settings")],-1)),t("div",de,[t("div",ce,[e[20]||(e[20]=t("h3",null,"Data Management",-1)),e[21]||(e[21]=t("p",null,"Export or import news data",-1)),t("div",ue,[f(U,{onClick:J,variant:"outline"},{default:x(()=>[...e[17]||(e[17]=[D(" ðŸ“¤ Export Data ",-1)])]),_:1}),f(U,{onClick:K,variant:"outline"},{default:x(()=>[...e[18]||(e[18]=[D(" ðŸ“¥ Import Data ",-1)])]),_:1}),f(U,{onClick:X,variant:"outline",loading:w.value},{default:x(()=>[...e[19]||(e[19]=[D(" ðŸ”„ Reset to Default ",-1)])]),_:1},8,["loading"])])])]),t("input",{ref_key:"fileInput",ref:C,type:"file",accept:".json",onChange:Q,style:{display:"none"}},null,544)])):M("",!0),f(ct,{show:a.value||v.value,onClose:I,title:"Article Editor",size:"large"},{default:x(()=>[f(xt,{article:n.value,isEditing:v.value,onSave:H,onCancel:I},null,8,["article","isEditing"])]),_:1},8,["show"]),V(s).text?(m(),p("div",{key:3,class:T(["message",V(s).type])},r(V(s).text),3)):M("",!0)]))}},ye=j(pe,[["__scopeId","data-v-6354bf9d"]]);export{ye as default};
