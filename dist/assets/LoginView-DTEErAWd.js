import{_ as O,r as E,o as Q,c as l,b as a,d as s,l as u,i as w,n as S,u as r,t as m,m as A,g as f,v as W,p as j,f as G,w as H,h as X,F as J,k as K,q as Y,s as Z}from"./index-lMPH8_VB.js";import{useAuthStore as ee}from"./auth-Tdidl8XK.js";import{u as se,V as h,R as re}from"./useForm-DuSWQ0ic.js";import{u as oe}from"./useStatusMessage-BE-JAxgR.js";import{L as te}from"./LoadingSpinner-BszNLXuH.js";/* empty css                                                                       */const ae={class:"login page-container"},le={class:"login-form-container"},ie=["value","disabled","aria-invalid","aria-describedby"],ne={key:0,id:"email-error",class:"error-message",role:"alert"},de={class:"password-input-group"},ue=["type","value","disabled","aria-invalid","aria-describedby"],me=["aria-label"],pe={key:0,id:"password-error",class:"error-message",role:"alert"},ve={class:"form-options"},ge={class:"remember-me"},be=["disabled"],ce=["disabled","aria-describedby"],we={class:"signup-prompt"},fe={key:1,id:"form-errors",class:"form-errors",role:"alert","aria-live":"assertive"},ye={class:"modal-header"},ke={class:"modal-body"},Ee={class:"form-group"},Se={__name:"LoginView",setup(he){const B=Z(),q=ee(),{statusMessage:y,showMessage:g}=oe(),{formData:b,errors:t,isValid:x,isSubmitting:n,canSubmit:_,handleFieldInput:I,handleFieldBlur:P,handleSubmit:$,resetForm:D}=se({email:"",password:"",rememberMe:!1},{email:[{required:!0,message:h.REQUIRED},{pattern:re.EMAIL,message:h.EMAIL}],password:[{required:!0,message:h.REQUIRED}]}),p=E(!1),v=E(!1),d=E("");Q(()=>{document.title="Sign In - Epictetus EE Team"});const N=async()=>{var e;const i=await $(async c=>{if(await q.login({email:c.email,password:c.password}))g("Login successful! Welcome back.","success"),D(),setTimeout(()=>{B.push("/admin")},1e3);else throw new Error("Invalid email or password. Please try again.")});i.success||g(((e=i.error)==null?void 0:e.message)||"Login failed. Please try again.","error")},U=async()=>{if(d.value)try{await new Promise(i=>setTimeout(i,1e3)),console.log("Password reset requested for:",d.value),g(`Password reset instructions sent to ${d.value}`,"success"),v.value=!1,d.value=""}catch(i){console.error("Password reset failed:",i),g("Failed to send reset instructions. Please try again.","error")}};return(i,e)=>{var k,L,M,R,C,V,F,T;const c=X("router-link");return a(),l("div",ae,[e[22]||(e[22]=s("div",{class:"login-header"},[s("h1",null,"Welcome Back"),s("p",{class:"login-description"}," Sign in to your Epictetus EE Team account to access exclusive resources and connect with fellow students. ")],-1)),s("div",le,[s("form",{onSubmit:w(N,["prevent"]),class:"login-form"},[s("div",{class:S(["form-group",{error:(k=r(t).email)==null?void 0:k.length}])},[e[11]||(e[11]=s("label",{for:"email"},"Email Address *",-1)),s("input",{type:"email",id:"email",value:r(b).email,onInput:e[0]||(e[0]=o=>r(I)("email",o)),onBlur:e[1]||(e[1]=o=>r(P)("email")),placeholder:"Enter your email address",required:"",disabled:r(n),autocomplete:"username","aria-invalid":(L=r(t).email)!=null&&L.length?"true":"false","aria-describedby":(M=r(t).email)!=null&&M.length?"email-error":null},null,40,ie),(R=r(t).email)!=null&&R.length?(a(),l("div",ne,m(r(t).email[0]),1)):u("",!0)],2),s("div",{class:S(["form-group",{error:(C=r(t).password)==null?void 0:C.length}])},[e[12]||(e[12]=s("label",{for:"password"},"Password *",-1)),s("div",de,[s("input",{type:p.value?"text":"password",id:"password",value:r(b).password,onInput:e[2]||(e[2]=o=>r(I)("password",o)),onBlur:e[3]||(e[3]=o=>r(P)("password")),placeholder:"Enter your password",required:"",disabled:r(n),autocomplete:"current-password","aria-invalid":(V=r(t).password)!=null&&V.length?"true":"false","aria-describedby":(F=r(t).password)!=null&&F.length?"password-error":null},null,40,ue),s("button",{type:"button",class:"password-toggle",onClick:e[4]||(e[4]=o=>p.value=!p.value),"aria-label":p.value?"Hide password":"Show password"},m(p.value?"ðŸ‘ï¸":"ðŸ‘ï¸â€ðŸ—¨ï¸"),9,me)]),(T=r(t).password)!=null&&T.length?(a(),l("div",pe,m(r(t).password[0]),1)):u("",!0)],2),s("div",ve,[s("label",ge,[A(s("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=o=>r(b).rememberMe=o),disabled:r(n)},null,8,be),[[W,r(b).rememberMe]]),e[13]||(e[13]=s("span",{class:"checkmark"},null,-1)),e[14]||(e[14]=f(" Remember me ",-1))]),s("a",{href:"#",onClick:e[6]||(e[6]=w(o=>v.value=!0,["prevent"])),class:"forgot-password"}," Forgot password? ")]),s("button",{type:"submit",class:"btn btn-primary submit-btn",disabled:!r(_)||r(n),"aria-describedby":r(x)?null:"form-errors"},[r(n)?(a(),j(te,{key:0,size:"small",color:"white"})):u("",!0),f(" "+m(r(n)?"Signing in...":"Sign In"),1)],8,ce),s("div",we,[s("p",null,[e[16]||(e[16]=f("Don't have an account? ",-1)),G(c,{to:"/signup"},{default:H(()=>[...e[15]||(e[15]=[f("Create one here",-1)])]),_:1})])])],32),r(y).text?(a(),l("div",{key:0,class:S(["status-message",r(y).type]),role:"alert","aria-live":"polite"},m(r(y).text),3)):u("",!0),!r(x)&&Object.keys(r(t)).length>0?(a(),l("div",fe,[e[17]||(e[17]=s("h4",null,"Please fix the following errors:",-1)),s("ul",null,[(a(!0),l(J,null,K(r(t),(o,z)=>(a(),l("li",{key:z},m(o[0]),1))),128))])])):u("",!0)]),v.value?(a(),l("div",{key:0,class:"modal-overlay",onClick:e[10]||(e[10]=o=>v.value=!1)},[s("div",{class:"modal-content",onClick:e[9]||(e[9]=w(()=>{},["stop"]))},[s("div",ye,[e[18]||(e[18]=s("h3",null,"Reset Password",-1)),s("button",{onClick:e[7]||(e[7]=o=>v.value=!1),class:"close-btn"},"Ã—")]),s("div",ke,[e[21]||(e[21]=s("p",null,"Enter your email address and we'll send you instructions to reset your password.",-1)),s("form",{onSubmit:w(U,["prevent"]),class:"forgot-form"},[s("div",Ee,[e[19]||(e[19]=s("label",{for:"reset-email"},"Email Address",-1)),A(s("input",{type:"email",id:"reset-email","onUpdate:modelValue":e[8]||(e[8]=o=>d.value=o),placeholder:"your.email@example.com",required:""},null,512),[[Y,d.value]])]),e[20]||(e[20]=s("button",{type:"submit",class:"btn btn-primary"}," Send Reset Instructions ",-1))],32)])])])):u("",!0)])}}},Ce=O(Se,[["__scopeId","data-v-f6e13bc5"]]);export{Ce as default};
