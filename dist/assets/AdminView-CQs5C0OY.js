import{_ as M,j as g,y as O,a as j,c as b,l as x,b as h,d as o,A as U,t as S,i as q,n as B,B as N,x as P,r as y,o as F,m as w,q as k,C as T,e as z,v as D,s as H,f as C,u as $,F as R,k as G,h as V,w as I}from"./index-q9JKsn7m.js";import{useAuthStore as K}from"./auth-Bd4Vi1Ov.js";import{u as J}from"./news-BQQh8_8L.js";import{P as Q}from"./AppButton.vue_vue_type_style_index_0_scoped_4b66342a_lang-CHOfbiYa.js";/* empty css                                                                       */import{u as W}from"./useStatusMessage-BKyr_FqO.js";const X=["aria-labelledby","aria-describedby"],Y={key:0,class:"modal-header"},Z=["id"],ee=["id"],te={key:1,class:"modal-footer"},oe={__name:"AppModal",props:{show:{type:Boolean,required:!0},title:{type:String,default:null},size:{type:String,default:"medium",validator:i=>["small","medium","large","fullscreen"].includes(i)},closeOnOverlayClick:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},persistent:{type:Boolean,default:!1}},emits:["close","opened","closed"],setup(i,{emit:A}){const s=i,a=A,p=g(()=>`modal-title-${Math.random().toString(36).substr(2,9)}`),t=g(()=>`modal-content-${Math.random().toString(36).substr(2,9)}`),d=g(()=>["modal-content",`modal-content--${s.size}`,{"modal-content--persistent":s.persistent}]),n=()=>{s.closeOnOverlayClick&&!s.persistent&&u()},u=()=>{s.persistent||a("close")},c=m=>{m.key==="Escape"&&s.show&&!s.persistent&&u()};return O(()=>s.show,async m=>{if(m){document.body.style.overflow="hidden",document.addEventListener("keydown",c),await N();const r=document.querySelector(".modal-content");r&&r.focus(),a("opened")}else document.body.style.overflow="auto",document.removeEventListener("keydown",c),a("closed")}),j(()=>{document.body.style.overflow="auto",document.removeEventListener("keydown",c)}),(m,r)=>i.show?(h(),b("div",{key:0,class:"modal-overlay",onClick:n},[o("div",{class:B(["modal-content",d.value]),onClick:r[0]||(r[0]=q(()=>{},["stop"])),role:"dialog","aria-labelledby":p.value,"aria-describedby":t.value},[m.$slots.header||i.title?(h(),b("div",Y,[i.title?(h(),b("h3",{key:0,id:p.value,class:"modal-title"},S(i.title),9,Z)):x("",!0),U(m.$slots,"header",{},void 0),i.showCloseButton?(h(),b("button",{key:1,class:"modal-close",onClick:u,"aria-label":"Close modal"}," Ã— ")):x("",!0)])):x("",!0),o("div",{class:"modal-body",id:t.value},[U(m.$slots,"default",{},void 0)],8,ee),m.$slots.footer?(h(),b("div",te,[U(m.$slots,"footer",{},void 0)])):x("",!0)],10,X)])):x("",!0)}},se=M(oe,[["__scopeId","data-v-93f646d5"]]),ae={class:"article-editor"},le={class:"form-group"},ie={class:"form-group"},ne={class:"form-group"},re={class:"form-group"},de={class:"form-group"},ce={class:"form-group"},ue={class:"form-group"},me={class:"form-group checkbox-group"},pe={class:"checkbox-label"},ve={class:"form-actions"},fe=["disabled"],ge={__name:"ArticleEditor",props:{article:{type:Object,default:null},isEditing:{type:Boolean,default:!1}},emits:["save","cancel"],setup(i,{expose:A,emit:s}){const a=i,p=s,t=P({title:"",description:"",content:"",category:"",tags:[],imageUrl:"",author:"Admin",published:!0}),d=y(""),n=g(()=>t.title.trim()&&t.description.trim()&&t.content.trim()&&t.category);O(d,r=>{r?t.tags=r.split(",").map(e=>e.trim()).filter(e=>e):t.tags=[]}),F(()=>{a.isEditing&&a.article&&(Object.assign(t,{title:a.article.title||"",description:a.article.description||"",content:a.article.content||"",category:a.article.category||"",tags:a.article.tags||[],imageUrl:a.article.imageUrl||"",author:a.article.author||"Admin",published:a.article.published!==!1}),d.value=t.tags.join(", "))});const u=()=>{if(!n.value)return;const r={...t,tags:t.tags.filter(e=>e.trim())};a.isEditing&&a.article&&(r.id=a.article.id),p("save",r)},c=()=>{p("cancel")};return A({resetForm:()=>{Object.assign(t,{title:"",description:"",content:"",category:"",tags:[],imageUrl:"",author:"Admin",published:!0}),d.value=""}}),(r,e)=>(h(),b("div",ae,[o("form",{onSubmit:q(u,["prevent"]),class:"editor-form"},[o("div",le,[e[8]||(e[8]=o("label",{for:"title"},"Title *",-1)),w(o("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=l=>t.title=l),type:"text",placeholder:"Enter article title",required:"",class:"form-input"},null,512),[[k,t.title]])]),o("div",ie,[e[9]||(e[9]=o("label",{for:"description"},"Description *",-1)),w(o("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=l=>t.description=l),placeholder:"Brief description of the article",required:"",class:"form-textarea",rows:"3"},null,512),[[k,t.description]])]),o("div",ne,[e[10]||(e[10]=o("label",{for:"content"},"Content *",-1)),w(o("textarea",{id:"content","onUpdate:modelValue":e[2]||(e[2]=l=>t.content=l),placeholder:"Full article content",required:"",class:"form-textarea content-editor",rows:"10"},null,512),[[k,t.content]])]),o("div",re,[e[12]||(e[12]=o("label",{for:"category"},"Category *",-1)),w(o("select",{id:"category","onUpdate:modelValue":e[3]||(e[3]=l=>t.category=l),required:"",class:"form-select"},[...e[11]||(e[11]=[z('<option value="" data-v-59228a40>Select a category</option><option value="academic" data-v-59228a40>Academic</option><option value="events" data-v-59228a40>Events</option><option value="announcements" data-v-59228a40>Announcements</option><option value="research" data-v-59228a40>Research</option><option value="student-life" data-v-59228a40>Student Life</option><option value="general" data-v-59228a40>General</option>',7)])],512),[[T,t.category]])]),o("div",de,[e[13]||(e[13]=o("label",{for:"tags"},"Tags",-1)),w(o("input",{id:"tags","onUpdate:modelValue":e[4]||(e[4]=l=>d.value=l),type:"text",placeholder:"Enter tags separated by commas (e.g., philosophy, stoicism, ethics)",class:"form-input"},null,512),[[k,d.value]]),e[14]||(e[14]=o("small",{class:"form-help"},"Separate multiple tags with commas",-1))]),o("div",ce,[e[15]||(e[15]=o("label",{for:"imageUrl"},"Image URL",-1)),w(o("input",{id:"imageUrl","onUpdate:modelValue":e[5]||(e[5]=l=>t.imageUrl=l),type:"url",placeholder:"https://example.com/image.jpg",class:"form-input"},null,512),[[k,t.imageUrl]])]),o("div",ue,[e[16]||(e[16]=o("label",{for:"author"},"Author",-1)),w(o("input",{id:"author","onUpdate:modelValue":e[6]||(e[6]=l=>t.author=l),type:"text",placeholder:"Author name",class:"form-input"},null,512),[[k,t.author]])]),o("div",me,[o("label",pe,[w(o("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>t.published=l),type:"checkbox",class:"form-checkbox"},null,512),[[D,t.published]]),e[17]||(e[17]=o("span",{class:"checkbox-text"},"Publish immediately",-1))])]),o("div",ve,[o("button",{type:"button",onClick:c,class:"btn btn-secondary"}," Cancel "),o("button",{type:"submit",class:"btn btn-primary",disabled:!n.value},S(i.isEditing?"Update Article":"Create Article"),9,fe)])],32)]))}},ye=M(ge,[["__scopeId","data-v-59228a40"]]);function be(i){return i.toString().toLowerCase().trim().replace(/[\s\_]+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function he(i,A=[]){const s=y([{text:"Home",to:"/"},{text:i,to:`/${be(i)}`},...A]),a=n=>{s.value.push(n)},p=n=>{s.value.splice(n,1)},t=()=>{const n=s.value.findIndex(c=>c.text==="Home"),u=s.value.findIndex(c=>c.text===i);u>-1?s.value=s.value.slice(0,u+1):n>-1&&(s.value=s.value.slice(0,n+1))},d=g(()=>{var n;return((n=s.value[s.value.length-1])==null?void 0:n.text)||"Page"});return{breadcrumbs:s,addBreadcrumb:a,removeBreadcrumb:p,clearAdditionalBreadcrumbs:t,currentPage:d}}const we={class:"admin-panel page-container"},Ae={class:"admin-nav"},ke={class:"nav-icon"},xe={class:"nav-text"},_e={class:"admin-content"},Ce={__name:"AdminView",setup(i){const A=K(),s=J(),a=H();A.isAdmin||a.push("/"),y("news");const p=y(!1),t=y(!1),d=y(null);y(null),y(!1),y(null);const{breadcrumbs:n}=he("Admin"),{statusMessage:u,showMessage:c}=W(),m=[{id:"news",name:"News Management",icon:"ðŸ“°",route:"/admin"},{id:"stats",name:"Statistics",icon:"ðŸ“Š",route:"/admin/stats"},{id:"settings",name:"Settings",icon:"âš™ï¸",route:"/admin/settings"},{id:"pull",name:"Pull & Build",icon:"âš™ï¸",route:"/admin/pull"}],r=g(()=>s.articles);g(()=>s.featuredArticles.length),g(()=>r.value.reduce((v,f)=>v+f.views,0)),g(()=>r.value.reduce((v,f)=>v+f.likes,0)),g(()=>s.categories.filter(v=>v.value!=="all"));const e=async v=>{try{let f;if(t.value?f=await s.updateArticle(d.value.id,v):f=await s.addArticle(v),f.success){l();const E=t.value?"updated":"created";c(`Article ${E} successfully`,"success")}else c(f.error||"Failed to save article","error")}catch{c("An error occurred while saving the article","error")}},l=()=>{p.value=!1,t.value=!1,d.value=null};return F(()=>{s.clearError()}),(v,f)=>{const E=V("router-link"),L=V("router-view");return h(),b("div",we,[C(Q,{title:"Admin Panel",description:"Manage news articles and system settings",breadcrumbs:$(n),showBreadcrumbs:!0},null,8,["breadcrumbs"]),o("div",Ae,[(h(),b(R,null,G(m,_=>C(E,{key:_.id,to:_.route,class:B(["admin-nav-btn",{active:v.$route.path===_.route}])},{default:I(()=>[o("span",ke,S(_.icon),1),o("span",xe,S(_.name),1)]),_:2},1032,["to","class"])),64))]),o("div",_e,[C(L)]),C(se,{show:p.value||t.value,onClose:l,title:"Article Editor",size:"large"},{default:I(()=>[C(ye,{article:d.value,isEditing:t.value,onSave:e,onCancel:l},null,8,["article","isEditing"])]),_:1},8,["show"]),$(u).text?(h(),b("div",{key:0,class:B(["message",$(u).type])},S($(u).text),3)):x("",!0)])}}},Ve=M(Ce,[["__scopeId","data-v-80a75707"]]);export{Ve as default};
