import{H as p,r as g,j as u}from"./index-lMPH8_VB.js";const w=[{id:1,title:"News Post Here",description:"Bottom News Text",content:"This is an example news post content. It's not a real thing, just a placeholder.",author:"Example Author",publishedDate:"2025-12-04",category:"announcements",featured:!1,imageUrl:"/logo.jpg",tags:["example","news","placeholder"],readTime:"1 min read",likes:0,views:0},{id:2,title:"News Post Here",description:"Bottom News Text",content:"This is an example news post content. It's not a real thing, just a placeholder.",author:"Example Author",publishedDate:"2025-12-04",category:"announcements",featured:!1,imageUrl:"/logo.jpg",tags:["example","news","placeholder"],readTime:"1 min read",likes:0,views:0},{id:3,title:"News Post Here",description:"Bottom News Text",content:"This is an example news post content. It's not a real thing, just a placeholder.",author:"Example Author",publishedDate:"2025-12-04",category:"announcements",featured:!1,imageUrl:"/logo.jpg",tags:["example","news","placeholder"],readTime:"1 min read",likes:0,views:0}],f=[{value:"all",label:"All News",description:"All news articles and updates"},{value:"updates",label:"Updates",description:"Department and facility updates"},{value:"achievements",label:"Achievements",description:"Student and faculty achievements"},{value:"research",label:"Research",description:"Research projects and grants"},{value:"events",label:"Events",description:"Upcoming events and lectures"},{value:"opportunities",label:"Opportunities",description:"Internships and career opportunities"},{value:"announcements",label:"Announcements",description:"General announcements and news"}],h={articles:w,categories:f};class A{constructor(){this.storageKey="epictetus_news_data",this.data=this.loadFromStorage()||this.getDefaultData()}getDefaultData(){return{articles:[...h.articles],categories:[...h.categories],lastUpdated:new Date().toISOString()}}loadFromStorage(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);return{...this.getDefaultData(),...t,articles:t.articles||this.getDefaultData().articles}}}catch(e){console.warn("Error loading news data from storage:",e)}return null}saveToStorage(){try{return this.data.lastUpdated=new Date().toISOString(),localStorage.setItem(this.storageKey,JSON.stringify(this.data)),!0}catch(e){return console.error("Error saving news data to storage:",e),!1}}getAllArticles(){return[...this.data.articles]}getArticleById(e){return this.data.articles.find(t=>t.id===parseInt(e))}getArticlesByCategory(e){return e==="all"?this.getAllArticles():this.data.articles.filter(t=>t.category===e)}getFeaturedArticles(){return this.data.articles.filter(e=>e.featured)}searchArticles(e,t="all"){let a=t==="all"?this.getAllArticles():this.getArticlesByCategory(t);if(!e||e.trim()==="")return a;const n=e.toLowerCase();return a.filter(c=>c.title.toLowerCase().includes(n)||c.description.toLowerCase().includes(n)||c.content.toLowerCase().includes(n)||c.author.toLowerCase().includes(n)||c.tags.some(d=>d.toLowerCase().includes(n)))}addArticle(e){const a={id:Math.max(...this.data.articles.map(n=>n.id),0)+1,...e,publishedDate:e.publishedDate||new Date().toISOString().split("T")[0],likes:0,views:0,readTime:this.calculateReadTime(e.content)};return this.data.articles.unshift(a),this.saveToStorage(),a}updateArticle(e,t){const a=this.data.articles.findIndex(n=>n.id===parseInt(e));return a===-1?null:(this.data.articles[a]={...this.data.articles[a],...t,id:parseInt(e)},this.saveToStorage(),this.data.articles[a])}deleteArticle(e){const t=this.data.articles.findIndex(a=>a.id===parseInt(e));return t===-1?!1:(this.data.articles.splice(t,1),this.saveToStorage(),!0)}likeArticle(e){const t=this.getArticleById(e);return t?(t.likes++,this.saveToStorage(),t.likes):null}incrementViews(e){const t=this.getArticleById(e);return t?(t.views++,this.saveToStorage(),t.views):null}getCategories(){return this.data.categories.map(t=>({...t,count:t.value==="all"?this.data.articles.length:this.data.articles.filter(a=>a.category===t.value).length}))}calculateReadTime(e){const a=e.split(/\s+/).length;return`${Math.ceil(a/200)} min read`}resetToDefault(){return this.data=this.getDefaultData(),this.saveToStorage(),this.data}exportData(){return JSON.stringify(this.data,null,2)}importData(e){try{const t=JSON.parse(e);if(t.articles&&Array.isArray(t.articles))return this.data={...this.getDefaultData(),...t},this.saveToStorage(),!0;throw new Error("Invalid data format")}catch(t){return console.error("Error importing data:",t),!1}}}const i=new A,{getAllArticles:N,getArticleById:b,getArticlesByCategory:P,getFeaturedArticles:j,searchArticles:O,addArticle:L,updateArticle:U,deleteArticle:F,likeArticle:R,incrementViews:V,getCategories:H,calculateReadTime:J,resetToDefault:M,exportData:K,importData:W}=i,_=p("news",()=>{const l=g(!1),e=g(null),t=u(()=>i.getAllArticles()),a=u(()=>i.getFeaturedArticles()),n=u(()=>r=>i.getArticlesByCategory(r)),c=u(()=>r=>i.getArticleById(r)),d=u(()=>i.getCategories());return{isLoading:l,error:e,articles:t,featuredArticles:a,articlesByCategory:n,getArticleById:c,categories:d,addArticle:async r=>{l.value=!0,e.value=null;try{return await new Promise(o=>setTimeout(o,500)),{success:!0,article:i.addArticle(r)}}catch(s){return e.value=s.message,{success:!1,error:s.message}}finally{l.value=!1}},updateArticle:async(r,s)=>{l.value=!0,e.value=null;try{await new Promise(m=>setTimeout(m,300));const o=i.updateArticle(r,s);if(!o)throw new Error("Article not found");return{success:!0,article:o}}catch(o){return e.value=o.message,{success:!1,error:o.message}}finally{l.value=!1}},deleteArticle:async r=>{l.value=!0,e.value=null;try{if(await new Promise(o=>setTimeout(o,300)),!i.deleteArticle(r))throw new Error("Article not found");return{success:!0}}catch(s){return e.value=s.message,{success:!1,error:s.message}}finally{l.value=!1}},likeArticle:r=>i.likeArticle(r),incrementViews:r=>i.incrementViews(r),searchArticles:(r,s="all")=>i.searchArticles(r,s),clearError:()=>{e.value=null},resetToDefault:async()=>{l.value=!0,e.value=null;try{return await new Promise(r=>setTimeout(r,500)),i.resetToDefault(),{success:!0}}catch(r){return e.value=r.message,{success:!1,error:r.message}}finally{l.value=!1}},exportData:()=>i.exportData(),importData:async r=>{l.value=!0,e.value=null;try{if(await new Promise(o=>setTimeout(o,500)),!i.importData(r))throw new Error("Invalid data format");return{success:!0}}catch(s){return e.value=s.message,{success:!1,error:s.message}}finally{l.value=!1}}}});export{_ as u};
