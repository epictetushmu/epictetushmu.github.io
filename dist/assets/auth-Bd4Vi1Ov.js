import{D as p,r as o,j as l}from"./index-q9JKsn7m.js";const S=p("auth",()=>{const t=o(null),s=o(!1),a=o(null),c=l(()=>!!t.value),i=l(()=>{var e;return((e=t.value)==null?void 0:e.role)==="admin"}),m=l(()=>{var e;return((e=t.value)==null?void 0:e.name)||""}),v=async e=>{s.value=!0,a.value=null;try{if(await new Promise(r=>setTimeout(r,1e3)),e.email==="admin@epictetus.hmu.gr"&&e.password==="admin123")return t.value={id:1,name:"Admin User",email:e.email,role:"admin",avatar:"/logo.jpg"},localStorage.setItem("epictetus_user",JSON.stringify(t.value)),localStorage.setItem("epictetus_token","mock-jwt-token"),{success:!0};throw new Error("Invalid credentials")}catch(r){return a.value=r.message,{success:!1,error:r.message}}finally{s.value=!1}},u=()=>{t.value=null,a.value=null,localStorage.removeItem("epictetus_user"),localStorage.removeItem("epictetus_token")},n=()=>{const e=localStorage.getItem("epictetus_user"),r=localStorage.getItem("epictetus_token");if(e&&r)try{t.value=JSON.parse(e)}catch(d){console.error("Error parsing saved user data:",d),u()}},g=()=>{a.value=null};return n(),{user:t,isLoading:s,error:a,isAuthenticated:c,isAdmin:i,userName:m,login:v,logout:u,checkAuth:n,clearError:g}});export{S as useAuthStore};
